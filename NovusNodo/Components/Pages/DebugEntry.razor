@using Blazor.JsonEditor.Component
@using System.Text.Json.Nodes
@inject IJSRuntime JS



<MudCard Class="mb-2">
    <MudCardContent>
        <MudText Typo="Typo.subtitle2">@Timestamp.ToString("g")</MudText>
        <MudText Typo="Typo.body2" Color="Color.Secondary">@Tag</MudText>

        <div id="@string.Format("#{0}", MessageID)"></div>

    </MudCardContent>
</MudCard>

<style>


    @string.Format("#{0}", MessageID)
    {
        width: 500px;
        height: 300px;
    }
</style>

@code {
    [Parameter] public DateTime Timestamp { get; set; }
    [Parameter] public string Tag { get; set; }
    [Parameter] public string MessageID { get; set; }
    [Parameter] public JsonObject Message { get; set; }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JS.InvokeVoidAsync("JsonEditorCreateEditor", [$"{MessageID}", $"{Message}"]).ConfigureAwait(false);
        }
    }

}
