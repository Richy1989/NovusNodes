@inject NovusNodo.Management.NovusUIManagement NovusUIManagement
@inject NovusNodoCore.Managers.ExecutionManager ExecutionManager

@* <MudPaper Class="d-flex flex-row gap-4" Style="@($"background:rgb(0, 0, 0, 0.15);")" Elevation="0"> *@
<MudPaper Class="d-flex justify-space-around">
    <MudTooltip Text="@PlayPauseButtonToolTip">
        <MudIconButton Icon="@(PlayPauseButtonIcon)" Color="@PlayPauseButtonColor" OnClick="@PlayPauseButtonIconToggle" Class="rounded-0" />
    </MudTooltip>
    <MudDivider Vertical="true" FlexItem="true" />
    <MudTooltip Text="@LineStyleToolTip">
        <MudIconButton Icon="@LineStyleIcon" Color="@Color.Surface" OnClick="@LineStyleToggle" Class="rounded-0" />
    </MudTooltip>
    <MudTooltip Text="Reset Zoom">
        <MudIconButton Icon="@Icons.Material.Filled.ZoomInMap" Color="@Color.Surface" OnClick="@ResetZoomToggle" Class="rounded-0" />
    </MudTooltip>
</MudPaper>

@code {

    /// <summary>
    /// Toggles the play pause variable.
    /// </summary>
    private void PlayPauseButtonIconToggle()
    {
        ExecutionManager.IsExecutionAllowed = !ExecutionManager.IsExecutionAllowed;
    }

    /// <summary>
    /// Gets the icon for the play pause toggle button.
    /// </summary>
    public string PlayPauseButtonIcon => ExecutionManager.IsExecutionAllowed switch
    {
        true => Icons.Material.Rounded.PauseCircleFilled,
        false => Icons.Material.Outlined.PlayCircleFilled,
    };

    /// <summary>
    /// Gets the color for the play pause toggle button.
    /// </summary>
    public Color PlayPauseButtonColor => ExecutionManager.IsExecutionAllowed switch
    {
        true => Color.Error,
        false => Color.Tertiary,
    };

    public String PlayPauseButtonToolTip => ExecutionManager.IsExecutionAllowed switch
    {
        true => "Stop Execution",
        false => "Start Execution",
    };

    /// <summary>
    /// Toggles the line style variable.
    /// </summary>
    private void LineStyleToggle()
    {
        ExecutionManager.UseBezierCurve = !ExecutionManager.UseBezierCurve;
    }

    public String LineStyleToolTip => ExecutionManager.UseBezierCurve switch
    {
        true => "Linear Link",
        false => "Bezier Curve Link",
    };

    /// <summary>
    /// Gets the icon for the line style toggle button.
    /// </summary>
    public string LineStyleIcon => ExecutionManager.UseBezierCurve switch
    {
        true => "fa-solid fa-circle-nodes",
        false => "fa-solid fa-bezier-curve",
    };

    private async Task ResetZoomToggle()
    {
        await NovusUIManagement.ResetZoom();
    }
}
